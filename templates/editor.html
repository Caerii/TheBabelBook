{% extends "base.html" %}
{% block content %}
    <div class="container">
        <div class="mt-4">
            <form method="POST" action="/login">
                <button class="btn btn-primary" type="submit">Login</button>
            </form>
        </div>

        <form method="POST" action="/generateBook" class="generate-book-form">
            <label for="book_description" class="form-label">Describe a book you want!</label>
            <input type="text" id="book_description" name="prompt" class="form-control" placeholder="The ancient book of eggnog.">
            <button type="submit" class="btn btn-primary">Generate Book</button>
        </form>
        
        <form method="POST" action="/editor?action=addTreeNode&nodeid={{ NodeID }}&parentid={{ ParentNodeID }}" class="add-tree-node-form mt-4">
            <div class="mb-3">
                <label for="node_label" class="form-label">Node Label:</label>
                <input type="text" id="node_label" name="node_label" class="form-control" placeholder="Enter node label">
            </div>
            <div class="mb-3">
                <label for="node_data" class="form-label">Node Data:</label>
                <input type="text" id="node_data" name="node_data" class="form-control" placeholder="Enter node data">
            </div>
            <button type="submit" class="btn btn-primary">Add TreeNode</button>
        </form>
        
        
        
        <form method="POST" action="/editor?action=deleteTreeNode" class="delete-tree-node-form mt-4">
            <div class="mb-3">
                <label for="node_to_delete" class="form-label">Select a node to delete:</label>
                <select id="node_to_delete" name="node_to_delete" class="form-control">
                    {% for child in tree.children %}
                        <option value="{{ child[1] }}">{{ child[1] }}</option>
                    {% endfor %}
                </select>
            </div>
            <button type="submit" class="btn btn-primary">Delete TreeNode</button>
        </form>
        
        <form method="POST" action="/editor?action=exportTreeNode" class="export-tree-node-form mt-4">
            <button type="submit" class="btn btn-primary">Export TreeNode</button>
        </form>
        
        {% if tree.data|default([])|length > 0 %}
            {% if NodeID is none %}
                <div>
                    <b>{{ tree.data[0]['NodeLabel'] }}</b> <br>
                    &nbsp;&nbsp;&nbsp;&nbsp;{{ tree.data[0]['NodeData'] }} 
                </div>
            {% else %}
                {% for node in tree.data %}
                    {% if node['NodeID'] == NodeID %}
                        <i class="small">Current Node -----------------------------------------------------------------------------------------------</i> 
                        <div> <a href="/editor?ParentNodeID={{ tree.data[0]['ParentNodeID'] }}&NodeID={{ tree.data[0]['NodeID'] }}">{{ node['NodeID'] }}</a>
                            <b>{{ node['NodeLabel'] }}</b> <br>
                            &nbsp;&nbsp;&nbsp;&nbsp;{{ node['NodeData'] }} 
                        </div>
                    {% endif %}
                {% endfor %}
            {% endif %}
        {% endif %}
    
        <br>
        <i class="small"> List of Children of Node # {{request.args.get('NodeID')}} -----------------------------------------------------------------------------------------------</i>
        <br>
        <br>
        {% for child in tree.children  %}
            <div> <a href="/editor?ParentNodeID={{ child[0] }}&NodeID={{ child[1] }}">{{ child[1] }}</a> 
                <b>{{ child[2] }}</b> <br>
                &nbsp;&nbsp;&nbsp;&nbsp;{{ child[3] }} 
            </div>
        {% endfor %}
    </div>
{% endblock %}
